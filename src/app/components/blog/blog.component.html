<div class="container">
  <button type="button" (click)="sendMessage()">Send Message</button>
  <br>
  @for (post of postsSignal(); track post.id) {
    <div>
      <b>Post Body:</b>
      <p>{{ post.body }}</p>
    </div>
    <div>
      <b>Author:</b>
      <p>
        <em>{{ post.author.name }}</em>
      </p>
    </div>
    <h2>Comments</h2>
    @for (comment of post.comments; track comment.id) {
      <p>{{ comment.id }}</p>
      <p>{{ comment.comment }}</p>
    }
  }

  <form [formGroup]="form" (ngSubmit)="submitForm()">
    <div formArrayName="posts">
      @for (post of postsSignal(); let idx = $index; track post.id) {
        <div [formGroupName]="idx">
          <label for="body">Post Text</label>
          <input type="text" id="body" formControlName="body">
        </div>
      }
    </div>
    <br>
    <button type="submit">Send</button>
  </form>
</div>
